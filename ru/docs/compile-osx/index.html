<!DOCTYPE html><html class="no-js" lang="ru"><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><title>Сборка под OS X - Rigs of Rods</title><link href="/stylesheets/styles.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/github.min.css" rel="stylesheet" /><link href="/stylesheets/owl-carousel/assets/owl.carousel.css" rel="stylesheet" /><link href="/stylesheets/owl-carousel/assets/owl.theme.default.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CUbuntu+Mono:400%7CUbuntu:300,300italic,300bold,400,400italic,400bold,600,600italic,600bold" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-smooth-scroll/1.5.5/jquery.smooth-scroll.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script><script src="/stylesheets/owl-carousel/owl.carousel.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(){
    var WebP = new Image();
    WebP.onload = WebP.onerror = function(){
        if(WebP.height != 2){
            var sc = document.createElement('script');
            sc.type = 'text/javascript';
            sc.async = true;
            var s = document.getElementsByTagName('script')[0];
            sc.src = 'http://webpjs.appspot.com/js/webpjs-0.0.2.min.js';
            s.parentNode.insertBefore(sc,s);
        }
    };
    WebP.src='data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
})();</script><script>$(document).foundation();</script><script>$(document).ready(function() {
    $('a').smoothScroll();
    $('').click(function(event) {
        event.preventDefault();
        var link = this;
        $.smoothScroll({
            scrollTarget: link.hash
        });
    });
});</script><script>$(document).ready(function() {
  $("#media-slider").owlCarousel({
    items: 1,
    nav: true,
    merge: true,
    loop: true,
    video: true,
    lazyLoad: true,
    center: true,
    videoHeight: 720,
    responsive: {
      0:{
          items:1
      },
      600:{
          items:1
      },
      1000:{
          items:1
      }
    }
  });
});</script></head><body><div class="fixed contain-to-grid top-bar-margin"><nav class="top-bar" data-topbar="" role="navigation"><ul class="title-area"><li class="name"><h1><a href="/ru/">Rigs of Rods</a></h1></li></ul><section class="top-bar-section"><ul class="left"><li><a href="/ru/"><span class='fa fa-home'></span>  <span>Главная</span></a></li><li><a href="/ru/download/"><span class='fa fa-download'></span>  <span>Скачать</span></a></li><li><a href="/ru/repository/"><span class='fa fa-plus'></span>  <span>Хранилище</span></a></li><li><a href="/ru/forum/"><span class='fa fa-comments'></span>  <span>Форум</span></a></li><li><a href="/ru/blog/"><span class='fa fa-pencil'></span>  <span>Блог</span></a></li><li><a href="/ru/docs/"><span class='fa fa-lightbulb-o'></span>  <span>Документация</span></a></li><li><a href="/ru/races/"><span class='fa fa-users'></span>  <span>Мультиплеер</span></a></li></ul></section></nav></div></body></html><div class="row main-start"><div class="small-12 columns"><article><header><h1>Сборка под OS X</h1><div class="details"></div></header><div id="content"><div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#build_script_to_automatize_building_process">1. Build script to automatize building process</a></li>
<li><a href="#overview">2. Overview</a></li>
<li><a href="#prerequites">3. Prerequites</a></li>
<li><a href="#additional_dependencies_not_found_in_brew_repositories">4. Additional dependencies not found in brew repositories</a>
<ul class="sectlevel2">
<li><a href="#ogre">4.1. OGRE</a>
<ul class="sectlevel3">
<li><a href="#ogre_dependencies">4.1.1. OGRE dependencies</a></li>
<li><a href="#ogre_itself">4.1.2. OGRE itself</a></li>
</ul>
</li>
<li><a href="#mygui">4.2. MyGUI</a></li>
<li><a href="#ogre_paged_geometry">4.3. OGRE Paged Geometry</a></li>
<li><a href="#caelum">4.4. Caelum</a></li>
<li><a href="#mysocketw">4.5. MySocketW</a></li>
<li><a href="#angelscript">4.6. AngelScript</a></li>
</ul>
</li>
<li><a href="#build_the_game">5. Build the game</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build_script_to_automatize_building_process"><a class="anchor" href="#build_script_to_automatize_building_process"></a>1. Build script to automatize building process</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is an ongoing effort to create a shell script which fully automatizes
the process of building RoR on OS X so even someone with no knowledge of
coding could build RoR easily. The script is not finished yet and
contributions are greatly appreciated. You can find the script on GitHub:
<a href="https://github.com/Hiradur/rigsofrods-osxscripts" class="bare">https://github.com/Hiradur/rigsofrods-osxscripts</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Features still missing</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>GTK+2.0 installation</p>
</li>
<li>
<p>gdk2-pixbuf installation</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
These instructions are not entirely up to date and need an experienced Mac
user to update.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Rigs of Rods is a complex beast. It has a 3D engine, physics simulator,
water and sky plug-ins, input device system, networking, localization
plug-in module&#8230;&#8203; and so on.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rigs of Rods is built in 4 steps</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Download source code for RoR and supporting libraries (dependencies)</p>
</li>
<li>
<p>Compile libraries</p>
</li>
<li>
<p>Using CMake, create a Makefile for RoR</p>
</li>
<li>
<p>Use make to build the RoR app</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequites"><a class="anchor" href="#prerequites"></a>3. Prerequites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To compile RoR you will have to work with the Terminal (Finder → Go To →
Utilities → Terminal).</p>
</div>
<div class="paragraph">
<p>You need XCode Command Line Tools</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">xcode-select --install</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need the package manager brew to install some dependencies. See
<a href="http://brew.sh" class="bare">http://brew.sh</a> for info. You should install without sudo to minimize risk of
damaging your system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once brew is installed install these packages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">brew install wget pkgconfig cmake git boost wxwidgets openal-soft</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional_dependencies_not_found_in_brew_repositories"><a class="anchor" href="#additional_dependencies_not_found_in_brew_repositories"></a>4. Additional dependencies not found in brew repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have to compile a number of additional dependencies first to be able to
compile RoR. Except for OGRE none of these are required to build RoR but
highly recommended (or else you will lack GUI, vegetation, proper sky,
multiplayer and scripting).</p>
</div>
<div class="sect2">
<h3 id="ogre"><a class="anchor" href="#ogre"></a>4.1. OGRE</h3>
<div class="sect3">
<h4 id="ogre_dependencies"><a class="anchor" href="#ogre_dependencies"></a>4.1.1. OGRE dependencies</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd ~/rigs-of-rods/source
wget —c O ogredeps.zip https://bitbucket.org/cabalistic/ogredeps/get/tip.zip
unzip -o ogredeps.zip
cd cabalistic-ogredeps-*
cmake -DCMAKE_OSX_DEPLOYMENT_TARGET:STRING= \
-DCMAKE_INSTALL_PREFIX="~/rigs-of-rods/install" \
-DOGREDEPS_BUILD_CG:BOOL=TRUE \
.
make -j2
make install</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ogre_itself"><a class="anchor" href="#ogre_itself"></a>4.1.2. OGRE itself</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd ~/rigs-of-rods/source
wget -c -O ogre.zip http://bitbucket.org/sinbad/ogre/get/v1-8.zip
unzip -o ogre.zip
cd sinbad-ogre-*

# Apply patch for OS X 10.10
wget https://gist.github.com/Hiradur/a5573323ae2701bef6bc/download
patch -p1 &lt; ogre1.8osx.patch

cmake -DCMAKE_INSTALL_PREFIX="~/rigs-of-rods/install" \
-DCMAKE_BUILD_TYPE:STRING=Release \
-DOGRE_STATIC=1 \
-DOGRE_BUILD_SAMPLES:BOOL=OFF .
make -j2
make install</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>After this step the environment variable "PKG_CONFIG_PATH" has always to be
set, otherwise CMake will not be able to find OGRE. Do this now and every
time you open a new Terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">export PKG_CONFIG_PATH="~/rigs-of-rods/install/lib/pkgconfig"</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mygui"><a class="anchor" href="#mygui"></a>4.2. MyGUI</h3>
<div class="paragraph">
<p>A specific revision is required</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd "~/rigs-of-rods/source"
wget -c -O mygui.zip https://github.com/MyGUI/mygui/archive/a790944c344c686805d074d7fc1d7fc13df98c37.zip
unzip -o mygui.zip
cd mygui-*
cmake -DCMAKE_INSTALL_PREFIX="~/rigs-of-rods/install" \
-DCMAKE_BUILD_TYPE:STRING=Release \
-DMYGUI_BUILD_DEMOS:BOOL=OFF \
-DMYGUI_BUILD_DOCS:BOOL=OFF \
-DMYGUI_BUILD_TEST_APP:BOOL=OFF \
-DMYGUI_BUILD_TOOLS:BOOL=OFF \
-DMYGUI_BUILD_PLUGINS:BOOL=OFF .
make -j2
make install</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ogre_paged_geometry"><a class="anchor" href="#ogre_paged_geometry"></a>4.3. OGRE Paged Geometry</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd "~/rigs-of-rods/source"
git clone --depth=1 https://github.com/Hiradur/ogre-paged.git
cd ogre-paged
git pull
cmake -DCMAKE_INSTALL_PREFIX="~/rigs-of-rods/install" \
-DCMAKE_BUILD_TYPE:STRING=Release \
-DPAGEDGEOMETRY_BUILD_SAMPLES:BOOL=OFF .
make -j2
make install</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="caelum"><a class="anchor" href="#caelum"></a>4.4. Caelum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd "~/rigs-of-rods/source"
wget -c -O caelum.zip http://caelum.googlecode.com/archive/3b0f1afccf5cb75c65d812d0361cce61b0e82e52.zip
unzip -o caelum.zip
cd caelum-*
cmake -DCMAKE_INSTALL_PREFIX="~/rigs-of-rods/install" \
-DCaelum_BUILD_SAMPLES:BOOL=OFF .
make -j2
make install
# important step, so the plugin can load:
ln -sf "~/rigs-of-rods/install/lib/libCaelum.so" "~/rigs-of-rods/install/lib/OGRE/"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mysocketw"><a class="anchor" href="#mysocketw"></a>4.5. MySocketW</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd "~/rigs-of-rods/source"
git clone --depth=1 https://github.com/Hiradur/mysocketw.git
cd mysocketw
git pull
sed -i '/^PREFIX *=/d' Makefile.conf
make -j2 shared
PREFIX="~/rigs-of-rods/install" make install</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="angelscript"><a class="anchor" href="#angelscript"></a>4.6. AngelScript</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">cd "~/rigs-of-rods/source"
mkdir angelscript
cd angelscript
wget -c http://www.angelcode.com/angelscript/sdk/files/angelscript_2.22.1.zip
unzip -o angelscript_*.zip
cd sdk/angelscript/projects/gnuc macosx
sed -i '/^LOCAL *=/d' makefile
# make fails when making the symbolic link, this removes the existing versions
rm -f ../../lib/*
make -j2
rm -f ../../lib/*
LOCAL="~/rigs-of-rods/install" make -s install</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build_the_game"><a class="anchor" href="#build_the_game"></a>5. Build the game</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">git clone https://github.com/RigsOfRods/rigs-of-rods.git
cd rigs-of-rods
git pull
cmake -DCMAKE_INSTALL_PREFIX="~/rigs-of-rods/install" \
-DROR_USE_MYGUI="TRUE" \
-DROR_USE_OPENAL="TRUE" \
-DROR_USE_SOCKETW="TRUE" \
-DROR_USE_PAGED="TRUE" \
-DROR_USE_CAELUM="TRUE" \
-DROR_USE_ANGELSCRIPT="TRUE" \
-DCMAKE_BUILD_TYPE=RELEASE \
-DCMAKE_CXX_FLAGS="-O2 -pipe -march=native" \
.
make -j2
sed -i '/^PluginFolder=/d' bin/plugins.cfg
echo "PluginFolder=~/rigs-of-rods/install/lib/OGRE" &gt;&gt;bin/plugins.cfg
cp -R bin "~/rigs-of-rods/install"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your build was successful you will find the binaries to start the game in
<em>~/rigs-of-rods/install/bin</em></p>
</div>
</div>
</div></div></article></div></div><footer><div class="row"><div class="small-12 medium-4 columns"><h4>Мы открыты</h4>Rigs of Rods - свободное программное обеспечение, доступное на условиях <a href='https://www.gnu.org/Copyleft/' title='Авторское лево'>авторского лева</a>, лицензии <a href='http://www.gnu.org/licenses/gpl-3.0.html' title='Лицензия GPLv3'>GPLv3</a>.</div><div class="small-12 medium-2 columns"><h4>Главная</h4><ul><li><a href="/ru/download" title="Скачать игру">Скачать</a></li><li><a href="/ru/blog" title="Читать блог">Блог</a></li><li><a href="/ru/docs" title="Ознакомиться с документацией">Документация</a></li></ul></div><div class="small-12 medium-2 columns"><h4>Форум</h4><ul><li><a href="http://rigsofrods.com/forum" title="Общение с сообществом">Заглавная</a></li><li><a href="http://rigsofrods.com/sso" title="Зарегистрироваться на форуме">Зарегистрироваться</a></li><li><a href="http://rigsofrods.com/search.php" title="Найти нужную информацию">Поиск</a></li></ul></div><div class="small-12 medium-4 columns"><h4>Подпишись</h4><ul class="home-social"><li><a class="fa fa-skype" href="skype:?chat&blob=exB2MnslJgrO7xk2xk1JRT6whqW6Ujju4gfIg9DbnMeqJJcSlvqjcSiDJkskBWBYAy2ZS0TiomfDPYLCfqeGNvUUeRmWNuXkg57cxYe6"></a><a class="fa fa-vk" href="https://vk.com/rigsofrods.official"></a><a class="fa fa-facebook" href="https://facebook.com/rigsofrods.official"></a><a class="fa fa-twitter" href="https://twitter.com/rigsofrods_game"></a><a class="fa fa-youtube" href="https://youtube.com/OfficialRigsOfRods"></a></li></ul></div></div></footer>