<!DOCTYPE html><html class="no-js" lang="ru"><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><title>Документация по ЖД - Rigs of Rods</title><link href="/stylesheets/styles.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/github.min.css" rel="stylesheet" /><link href="/stylesheets/owl-carousel/assets/owl.carousel.css" rel="stylesheet" /><link href="/stylesheets/owl-carousel/assets/owl.theme.default.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CUbuntu+Mono:400%7CUbuntu:300,300italic,300bold,400,400italic,400bold,600,600italic,600bold" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-smooth-scroll/1.5.5/jquery.smooth-scroll.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script><script src="/stylesheets/owl-carousel/owl.carousel.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(){
    var WebP = new Image();
    WebP.onload = WebP.onerror = function(){
        if(WebP.height != 2){
            var sc = document.createElement('script');
            sc.type = 'text/javascript';
            sc.async = true;
            var s = document.getElementsByTagName('script')[0];
            sc.src = 'http://webpjs.appspot.com/js/webpjs-0.0.2.min.js';
            s.parentNode.insertBefore(sc,s);
        }
    };
    WebP.src='data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
})();</script><script>$(document).foundation();</script><script>$(document).ready(function() {
    $('a').smoothScroll();
    $('').click(function(event) {
        event.preventDefault();
        var link = this;
        $.smoothScroll({
            scrollTarget: link.hash
        });
    });
});</script><script>$(document).ready(function() {
  $("#media-slider").owlCarousel({
    items: 1,
    nav: true,
    merge: true,
    loop: true,
    video: true,
    lazyLoad: true,
    center: true,
    videoHeight: 720,
    responsive: {
      0:{
          items:1
      },
      600:{
          items:1
      },
      1000:{
          items:1
      }
    }
  });
});</script></head><body><div class="fixed contain-to-grid top-bar-margin"><nav class="top-bar" data-topbar="" role="navigation"><ul class="title-area"><li class="name"><h1><a href="/ru/">Rigs of Rods</a></h1></li></ul><section class="top-bar-section"><ul class="left"><li><a href="/ru/"><span class='fa fa-home'></span>  <span>Главная</span></a></li><li><a href="/ru/download/"><span class='fa fa-download'></span>  <span>Скачать</span></a></li><li><a href="/ru/repository/"><span class='fa fa-plus'></span>  <span>Хранилище</span></a></li><li><a href="/ru/forum/"><span class='fa fa-comments'></span>  <span>Форум</span></a></li><li><a href="/ru/blog/"><span class='fa fa-pencil'></span>  <span>Блог</span></a></li><li><a href="/ru/docs/"><span class='fa fa-lightbulb-o'></span>  <span>Документация</span></a></li><li><a href="/ru/races/"><span class='fa fa-users'></span>  <span>Мультиплеер</span></a></li></ul></section></nav></div></body></html><div class="row main-start"><div class="small-12 columns"><article><header><h1>Документация по ЖД</h1><div class="details"></div></header><div id="content"><div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#basic_principle">1. Basic Principle</a></li>
<li><a href="#basic_node_and_beam_principles">2. Basic node and beam principles</a></li>
<li><a href="#building_a_railway_line">3. Building a railway line</a>
<ul class="sectlevel2">
<li><a href="#rortoolkit">3.1. RoRToolkit</a></li>
<li><a href="#3d_modelling_program_advanced">3.2. 3D modelling program (advanced)</a></li>
</ul>
</li>
<li><a href="#further_reading">4. Further reading</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="basic_principle"><a class="anchor" href="#basic_principle"></a>1. Basic Principle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The tracks are simple meshes that are placed on the map. They have a
collision mesh on which all rail vehicles drive. The track gauge is
approximately 1435mm, which is the most common in the world. In reality
train wheels have flanges. In RoR wheels can’t have such a geometry, so we
use nodes with low friction to keep everything on the rail (we call them
guidance nodes). Propulsed rail vehicles use standard wheels spanning the
two rails. The result is a quite long wheel what may be odd on the first
sight, but if you think about it real train wheels are basically the
same. This also helps to keep the nodecount down. See Figure 1.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/train-basic-concept-1.webp" alt="train basic concept 1" width="450">
</div>
<div class="title">Figure 1. Basic concept 1</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/train-basic-concept-2.webp" alt="train basic concept 2" width="450">
</div>
<div class="title">Figure 2. Basic concept 2</div>
</div>
<div class="paragraph">
<p>The wagons use low friction nodes instead of wheels. Main reason is the
nodecount, e.g. on a 4 axle wagon we can save approx. 120 nodes by doing
this, what will give you a much better framerate. See Figure 2.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="basic_node_and_beam_principles"><a class="anchor" href="#basic_node_and_beam_principles"></a>2. Basic node and beam principles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To make your rail vehicle working well, you need to obtain certain
principles.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/train-geometry.webp" alt="train geometry">
</div>
<div class="title">Figure 3. Train geometry</div>
</div>
<div class="ulist">
<ul>
<li>
<p>First of all your bogie geometry needs to be exactly as shown in Figure</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you make a wagon without wheels, the low friction nodes running on the
rail need to be exactly where the wheel in the picture would touch the rail.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Your guidance nodes (those running on the inner side of the rail) need to be
contacters. Give them a mass of 50 kilos. Give them low friction using
set_node_defaults. If you don&#8217;t use a wheel, the nodes sliding on top of the
rail also need low friction.</p>
</li>
<li>
<p>Node 0 needs to be exactly in the middle of your vehicle and 0.5 meters
below the rail. Otherwise it won&#8217;t spawn correctly in the train
spawner. Don&#8217;t forget to flag it with "c": don&#8217;t detect ground contact.</p>
</li>
<li>
<p>Make your wheels very hard using the spring and damping options.</p>
</li>
<li>
<p>Make the bogie node and beam very stiff using set_beam_defaults.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building_a_railway_line"><a class="anchor" href="#building_a_railway_line"></a>3. Building a railway line</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two ways to place the tracks on a map</p>
</div>
<div class="sect2">
<h3 id="rortoolkit"><a class="anchor" href="#rortoolkit"></a>3.1. RoRToolkit</h3>
<div class="paragraph">
<p>First copy everything from
<a href="http://www.rigsofrods.com/attachment.php?attachmentid=337492&amp;d=1344894876">this
zip</a> over to your map zip.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Always tell the people that the map
<a href="http://www.rigsofrods.com/repository/view/4339">"Train Valley"</a> is required
for all other train maps
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="http://www.gamefront.com/files/user/lepes">Download RoRToolkit
0.37</a>. <strong><span class="underline">Since RoR 0.38 the Toolkit will only work after you
renamed the
<a href="http://www.rigsofrods.com/wiki/pages/Installing_Files_from_the_Repository_post_0.36#How_to_find_the_.22My_documents.2FRigs_of_Rods_0.38.22_folder">RoR
Content folder in my documents</a> from "Rigs of Rods 0.38" to "Rigs of
Rods".</span></strong> Start RoRToolkit, choose your map and start placing the tracks,
Fig. 4.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/rail-toolkit-placement.webp" alt="rail toolkit placement">
</div>
<div class="title">Figure 4. Toolkit placement</div>
</div>
<div class="paragraph">
<p>If you need help on using the toolkit, search the forums. When finished with
placing, save the terrain file and put it into your map zip. Open the terrn
file with your text editor and search for lines containing a switch
(rail1tPnt190r634dL/R, rail1tPnt190r634dLe/Re). Copy the line and paste it
in a new line right below. Add "truck2" before and a ".fixed" after the
object name. When you use a rail1tPnt190r634dLe/Re (FPS switches), change it
to rail1tPnt190r634dLi/Ri in that second line (only there!):</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/rail-switch-placement-terrn.webp" alt="rail switch placement terrn">
</div>
<div class="title">Figure 5. Terrn file modifications</div>
</div>
<div class="paragraph">
<p>This will add the node and beam of the switch so you can actually change
direction. <strong><span class="underline">Don&#8217;t forget to rename your RoR content folder to
"Rigs of Rods 0.38", otherwise RoR won&#8217;t start anymore.</span></strong></p>
</div>
</div>
<div class="sect2">
<h3 id="3d_modelling_program_advanced"><a class="anchor" href="#3d_modelling_program_advanced"></a>3.2. 3D modelling program (advanced)</h3>
<div class="paragraph">
<p>When you want to create your track layout in a 3d modeling program (Blender,
3ds Max), you need to make sure the coordinates in the 3d modeling program
are the same as in RoR. Open the terrain *.zip and search for a *.cfg
file. Read out the size of the terrain, switch to your 3d modeling program
and create a plane with the same size in the correct position.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/tracks-in-3d-program.webp" alt="tracks in 3d program">
</div>
<div class="title">Figure 6. Coincide coordinates</div>
</div>
<div class="paragraph">
<p>This will be our placement help.</p>
</div>
<div class="paragraph">
<p>Now load the tracks from
<a href="http://www.rigsofrods.com/attachment.php?attachmentid=306258&amp;d=1333744539">this
blender file</a> and start assembling them to a nice railway track. It is quite
similar to RoR Toolkit. When finished, you need to attach all track pieces
together, but <strong>do not attach the switches</strong>! We only placed them to read out
the coordinates and we will place them on the map using the terrn file. For
that purpose, open the terrn file, click each switch in blender/3ds and copy
the coordinates (including rotational values) over to the terrn file. Then
do the same as in Fig. 5 to place the node and beam. Annoying, true. When
done, it&#8217;s time to export the track layout.</p>
</div>
<div class="paragraph">
<p>It should look like this with gaps for the switches:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="/images/switch-gaps.webp" alt="switch gaps" width="450">
</div>
<div class="title">Figure 7. Gaps for switches</div>
</div>
<div class="paragraph">
<p>Move the pivot point of the track to (0, 0, 0) and export the mesh. Now you
just need to place it on (0, 0, 0) in the terrn file2 and probably get the
angles right. Everything should be ingame then.</p>
</div>
<div class="paragraph">
<p>Should you choose to place your track using a 3D modeling program,
<a href="fake/../../generate-spline-from-heightmap/index.html">you can also generate
a track from a spline</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="further_reading"><a class="anchor" href="#further_reading"></a>4. Further reading</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="fake/../../creating-trains.html">Creating trains</a></p>
</li>
<li>
<p><a href="http://www.rigsofrods.com/wiki/images/1/1d/Manual_for_map_builders.pdf">Manual
for map builders</a></p>
</li>
<li>
<p><a href="http://www.rigsofrods.com/wiki/images/1/11/List_of_track_pieces.pdf">List of
track pieces</a></p>
</li>
</ul>
</div>
</div>
</div></div></article></div></div><footer><div class="row"><div class="small-12 medium-4 columns"><h4>Мы открыты</h4>Rigs of Rods - свободное программное обеспечение, доступное на условиях <a href='https://www.gnu.org/Copyleft/' title='Авторское лево'>авторского лева</a>, лицензии <a href='http://www.gnu.org/licenses/gpl-3.0.html' title='Лицензия GPLv3'>GPLv3</a>.</div><div class="small-12 medium-2 columns"><h4>Главная</h4><ul><li><a href="/ru/download" title="Скачать игру">Скачать</a></li><li><a href="/ru/blog" title="Читать блог">Блог</a></li><li><a href="/ru/docs" title="Ознакомиться с документацией">Документация</a></li></ul></div><div class="small-12 medium-2 columns"><h4>Форум</h4><ul><li><a href="http://rigsofrods.com/forum" title="Общение с сообществом">Заглавная</a></li><li><a href="http://rigsofrods.com/sso" title="Зарегистрироваться на форуме">Зарегистрироваться</a></li><li><a href="http://rigsofrods.com/search.php" title="Найти нужную информацию">Поиск</a></li></ul></div><div class="small-12 medium-4 columns"><h4>Подпишись</h4><ul class="home-social"><li><a class="fa fa-skype" href="skype:?chat&blob=exB2MnslJgrO7xk2xk1JRT6whqW6Ujju4gfIg9DbnMeqJJcSlvqjcSiDJkskBWBYAy2ZS0TiomfDPYLCfqeGNvUUeRmWNuXkg57cxYe6"></a><a class="fa fa-vk" href="https://vk.com/rigsofrods.official"></a><a class="fa fa-facebook" href="https://facebook.com/rigsofrods.official"></a><a class="fa fa-twitter" href="https://twitter.com/rigsofrods_game"></a><a class="fa fa-youtube" href="https://youtube.com/OfficialRigsOfRods"></a></li></ul></div></div></footer>